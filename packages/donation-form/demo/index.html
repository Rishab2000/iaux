<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://js.braintreegateway.com/web/3.62.0/js/client.js"></script>
  <script src="https://js.braintreegateway.com/web/3.62.0/js/hosted-fields.js"></script>

  <style>
    div[slot='braintree-hosted-fields'] div {
      height: 30px;
    }
  </style>
</head>
<body>
  <div id="demo">
  </div>

  <script type="module">
    import { html, render } from 'lit-html';
    import '../lib/donation-form.js';
    import { BraintreeManager } from '../lib/braintree-manager/braintree-manager.js';

    const hostedFieldStyle = {
      input: {
        'font-size': '14px',
        'font-family': '"Helvetica Neue", Helvetica, Arial, sans-serif',
        'font-weight': '700',
        color: '#333',
      },
      ':focus': {
        color: '#333',
      },
      '.valid': {
      },
      '.invalid': {
        color: '#b00b00',
      }
    }

    const hostedFieldConfig = {
      number: {
        selector: '#braintree-creditcard',
        placeholder: 'Card number'
      },
      cvv: {
        selector: '#braintree-cvv',
        placeholder: 'CVC'
      },
      expirationDate: {
        selector: '#braintree-expiration',
        placeholder: 'MM / YY'
      }
    }

    const braintreeManager = new BraintreeManager(
      window.braintree,
      '',
      hostedFieldStyle,
      hostedFieldConfig
    );

    render(
      html`
        <donation-form .braintreeManager=${braintreeManager}>

          <!--
            Why are these hosted fields here?

            Due to the way Braintree works, the hosted fields cannot exist
            in the shadowDOM so must exist in the clearDOM and get passed
            in through a <slot>. Their IDs are tied to the hostedFieldConfig
            configuration above.

            Braintree is working on a solution to this. See:
            - https://github.com/braintree/braintree-web-drop-in/issues/614#issuecomment-616796104
            - https://github.com/braintree/braintree-web-drop-in/issues/296#issuecomment-616749307
          -->
          <div slot="braintree-hosted-fields">
            <div id="braintree-creditcard"></div>
            <div id="braintree-cvv"></div>
            <div id="braintree-expiration"></div>
          </div>

        </donation-form>
      `,
      document.querySelector('#demo')
    );
  </script>
</body>
</html>
